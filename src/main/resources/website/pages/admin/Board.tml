<t:container xmlns:t="http://tapestry.apache.org/schema/tapestry_5_3.xsd" xmlns:p="tapestry:parameter">
	<t:adminFrame>
		<t:delegate t:to="activeBlock" />
	</t:adminFrame>

	<t:block t:id="modelsBlock">
		<div class="panel panel-default">
			<div class="panel-heading container-fluid">
			<div class="row">
			 <div class="col-sm-4">
					${message:models}
				</div>
				<div class="col-sm-8" style="text-align: right;">
						<t:pagelink t:page="prop:addModelCommand.page"
							t:context="prop:addModelCommand.context">${message:addModel}</t:pagelink>
				</div>
				</div>
			</div>
			<div class="panel-body"> 
			
				<div class="container-fluid">
					<t:form t:id="modelsForm" t:zone="modelsZone">
				
					<div class="row" style="margin-bottom:2em;">

						<div class="col-sm-3">
							<t:textfield  class="form-control" t:id="searchName" t:value="searchName" placeholder="${message:searchNameHint}" />
						</div>
						<div class="col-sm-3">
							<t:textField class="form-control" 
								t:id="searchCategory"
								t:value="searchCategory"
								t:mixins="AutoComplete"
								placeholder="${message:searchCategoryHint}"/>
						</div>

						<div class="col-sm-2">
							<t:checkBox   t:id="searchUnPublished" t:value="searchUnPublished" />
							<label for="searchUnPublished">${message:searchUnPublished}</label>
						</div>
						<div class="col-sm-1">
							<t:submit class="btn btn-default" t:value="${message:search}" />
						</div>
					</div>
					</t:form>
					<t:Grid t:row="model" t:source="models" t:model="gridModel" t:volatile="literal:true">
						<p:nameCell>
							<t:pagelink t:page="admin/board" t:context="modelContext" >${model.name}</t:pagelink>			
						</p:nameCell>
						<p:categoryCell>
							${model.category?.name}		
						</p:categoryCell>
						<p:publishedCell>
							<t:if t:test="model.published">
								jah
							</t:if>	
						</p:publishedCell>
						<p:photoCell>
							<t:image t:path="iconPath" class="preview-icon"/><br/>
						</p:photoCell>
					</t:Grid>
					</div>
				
			</div>
		</div>
	</t:block>

	<t:block t:id="modelBlock">
		<t:form t:id="modelForm">
		    <t:hidden t:value="model.key"/>
			<t:alerts t:showDismissAll="literal:false"/>
			<t:errors />
			<div class="row-fluid">
				<div class="col-md-5">
					<div class="panel panel-default">
						<div class="panel-heading">${modelLabel}</div>
						<div class="panel-body">

							<div class="panel-body row-fluid">
								<div class="col-md-12">
									<div class="form-group">
										<label for="name">${message:name}</label>
										<t:textfield class="form-control" t:id="name"
											t:value="model.name" placeholder="${message:nameHint}"
											t:validate="required" />
									</div>
									<div class="form-group">
										<label for="category">${message:category}</label>
										<t:textfield class="form-control" t:id="category"
											t:values="categories" t:label="categoryLabel" t:value="model.category.name"
											placeholder="${message:categoryHint}" />
									</div>
									<div class="form-group">
										<div class="checkbox">
											<label>
												<t:checkbox t:value="model.published" />
												${message:publish}
											</label>
										</div>
									</div>

								</div>

							</div>
						</div>
					</div>
					<div class="panel panel-default">
						<div class="panel-heading">${message:translations}</div>
						<div class="panel-body">
							<t:loop t:source="editLocales" t:value="editLocale" t:encoder="localeEncoder">
								<t:label t:for="translation">${nameTranslationLabel}</t:label>
								<t:textfield class="form-control" t:id="translation"
									t:value="translation" placeholder="${message:localeHint}" />
								<t:label t:for="translation">${categoryTranslationLabel}</t:label>
								<t:textfield class="form-control" t:id="ctranslation"
									t:value="categoryTranslation" placeholder="${message:categoryLocaleHint}" />
							</t:loop>
						</div>
					</div>
				</div>
				<div class="col-md-7">
					
					<div class="panel panel-default">
						<div class="panel-heading">${message:photo} ${photoLabel}</div>
						<div class="panel-body  text-center">
							<t:if t:test="!model.photo">
							<span class="glyphicon glyphicon-picture" aria-hidden="true"
								style=" font-size: 5em;"></span>	
							</t:if>
								<t:upload t:id="photo" t:label="messages:addPhoto"
								style="margin-top:1em;" t:value="original" />
							<t:if t:test="model.photo">	
							    ${message:preview} <br/>					
								<t:image t:path="previewPath" class="preview-img"/><br/>
								${message:thumbnail} <br/>
							   <t:image t:path="thumbnailPath" class="thumbnail-img"/>
							</t:if>	
								
						</div>
					</div>
					
					<t:loop t:source="editDetails" t:value="editDetail" t:encoder="detailEncoder">
					<div class="panel panel-default">
						<div class="panel-heading">${message:detail} ${detailLabel}</div>
						<div class="panel-body  text-center">
							<t:if t:test="!detailExists">
							<span class="glyphicon glyphicon-picture" aria-hidden="true"
								style=" font-size: 5em;"></span>	
							</t:if>
								<t:upload t:id="detail" t:label="messages:addDetail"
								style="margin-top:1em;" t:value="detailFile" />
							<t:if t:test="detailExists">	
							    ${message:preview_detail} <br/>					
								<t:image t:path="detailPreviewPath" class="preview-img"/><br/>
								${message:thumbnail_detail} <br/>
							   <t:image t:path="detailThumbnailPath" class="thumbnail-img"/>
							</t:if>	
								
						</div>
					</div>
					</t:loop>
				</div>
				<div class="col-md-12 text-left">
					<t:submit class="btn btn-default" t:value="${message:save}" />
				</div>
			</div>
		</t:form>
	</t:block>

	<t:block t:id="settings">
		<div class="panel panel-default">
			<div class="panel-heading">${message:properties}</div>
			<div class="panel-body">
				...props
			</div>
		</div>
	</t:block>

</t:container>